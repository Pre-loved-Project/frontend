import{j as t}from"./jsx-runtime-CDkspobp.js";import{r}from"./iframe-zeTcwSP2.js";import{I as u}from"./Input-BtV88hpc.js";import{D as v}from"./DropDown-DnsTLGG8.js";import{B as W}from"./Button-DO0JvQh_.js";import{a as Y}from"./fetcher-UjKcR3hy.js";import{c as z}from"./cn-DWDuF9m2.js";import"./preload-helper-B4AOKawx.js";import"./TextField-D3QheXpF.js";const A=({onSuccess:I,onError:_})=>{const[w,M]=r.useState(""),[b,L]=r.useState(""),[n,T]=r.useState(""),[i,$]=r.useState(""),[o,O]=r.useState(""),[l,C]=r.useState(""),[d,p]=r.useState(""),[g,f]=r.useState(null),[h,x]=r.useState(null),[y,N]=r.useState(null),[E,c]=r.useState(null),[j,D]=r.useState(!1),U=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),k=s=>{const e=s.target.value;M(e),e&&!U(e)?f("올바른 이메일 형식이 아닙니다."):f(null)},F=s=>{const e=s.target.value;L(e),e.length>10?x("닉네임은 최대 10자 이하이어야 합니다."):x(null)},H=s=>{const e=s.target.value;T(e),e&&e.length<8?N("비밀번호는 최소 8자 이상이어야 합니다."):N(null)},q=s=>{const e=s.target.value;$(e),c(n&&e&&n!==e?"비밀번호가 일치하지 않습니다.":null)};r.useEffect(()=>{c(n&&i&&n!==i?"비밀번호가 일치하지 않습니다.":null)},[n,i]);const B=Array.from({length:126},(s,e)=>{const a=1900+e;return{label:`${a}년`,value:a}}),J=()=>o?Array.from({length:12},(s,e)=>{const a=e+1;return{label:`${a}월`,value:a}}):[],K=()=>{if(!o||!l)return[];const s=new Date(o,l,0).getDate();return Array.from({length:s},(e,a)=>{const P=a+1;return{label:`${P}일`,value:P}})},R=async s=>{D(!0),s.preventDefault(),console.log("회원가입 요청 폼 제출");try{const e={email:w,nickname:b,birthDate:`${o}-${String(l).padStart(2,"0")}-${String(d).padStart(2,"0")}`,password:n};console.log(e);const a=await Y("/api/users/",{method:"POST",body:JSON.stringify(e),noAuth:!0});console.log("회원가입 성공:",a),I?.()}catch(e){console.error("회원가입 실패:",e+`
`),e instanceof Error&&(e.message.includes("EMAIL_DUPLICATE")?f("이미 사용 중인 이메일입니다."):e.message.includes("NICKNAME_DUPLICATE")?x("이미 사용 중인 닉네임입니다."):_?.("회원가입에 실패했습니다. 잠시 후 다시 시도해주세요."))}finally{D(!1)}},S=z("w-[100px]","md:w-[135px]","xl:w-[200px]");return t.jsxs("form",{onSubmit:R,className:"flex flex-col gap-6",children:[t.jsx(u,{label:"이메일",placeholder:"이메일을 입력해 주세요",isError:!!g,errorMessage:g??"",onChange:k}),t.jsx(u,{label:"닉네임",placeholder:"닉네임을 입력해 주세요",message:"최대 10자 가능",isError:!!h,errorMessage:h??"",onChange:F}),t.jsx(u,{label:"비밀번호",placeholder:"비밀번호를 입력해 주세요",message:"최소 8자 이상",isHiddenable:!0,isError:!!y,errorMessage:y??"",onChange:H}),t.jsx(u,{label:"비밀번호 확인",placeholder:"비밀번호를 한번 더 입력해 주세요",isHiddenable:!0,isError:!!E,errorMessage:E??"",onChange:q}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("label",{className:"text-[16px] font-medium text-white",children:"생년월일"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx(v,{options:B,value:o,onChange:s=>{O(s),C(""),p("")},placeholder:"연도",className:S}),t.jsx(v,{options:J(),value:l,onChange:s=>{C(s),p("")},placeholder:"월",className:S}),t.jsx(v,{options:K(),value:d,onChange:s=>p(s),placeholder:"일",className:S})]})]}),t.jsx(W,{variant:j?"secondary":"primary",type:"submit",className:"mt-6",disabled:!w||g!==null||!b||h!==null||!n||y!==null||!i||E!==null||!o||!l||!d,children:j?"가입 중 ...":"가입하기"})]})};A.__docgenInfo={description:"",methods:[],displayName:"SignUpForm",props:{onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(msg: string) => void",signature:{arguments:[{type:{name:"string"},name:"msg"}],return:{name:"void"}}},description:""}}};const ae={title:"AUTH/SignUpForm",component:A,parameters:{layout:"centered"},argTypes:{onSuccess:{action:"success"},onError:{action:"error"}}},m={};m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:"{}",...m.parameters?.docs?.source}}};const ne=["Large"];export{m as Large,ne as __namedExportsOrder,ae as default};
