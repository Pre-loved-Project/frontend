import{j as r}from"./jsx-runtime-K-Dn0W6b.js";import{r as t}from"./iframe-D2r0lrqQ.js";import{I as p}from"./Input-BN5O9AcM.js";import{B as w}from"./Button-BLihgfM8.js";import{L}from"./LoadingDots-B4Q8xBG9.js";import{a as T}from"./fetcher-CtHLRpuY.js";import{u as A}from"./auth.store-DjjjKUvx.js";import"./preload-helper-B4AOKawx.js";import"./cn-DWDuF9m2.js";import"./TextField-Cu7jNerZ.js";const g=({onSuccess:f,onError:h})=>{const[i,x]=t.useState(""),[l,y]=t.useState(""),[o,m]=t.useState(null),[n,u]=t.useState(null),[c,d]=t.useState(!1),{setAccessToken:E}=A(),S=async s=>{s.preventDefault(),d(!0);try{const e=await T("/api/auth/login",{method:"POST",body:JSON.stringify({email:i,password:l}),noAuth:!0});E(e.accessToken),f?.()}catch{h?.(`로그인에 실패하였습니다.
이메일과 비밀번호를 확인해주세요.`)}finally{d(!1)}},v=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),b=s=>{const e=s.target.value;x(e),e!=null&&e!==""&&!v(e)?m("올바른 이메일 형식이 아닙니다."):m(null)},j=s=>{const e=s.target.value;y(e),e!=null&&e!==""&&e.length<8?u("비밀번호는 최소 8자 이상이어야 합니다."):u(null)};return r.jsxs("form",{onSubmit:S,className:"flex flex-col gap-6",children:[r.jsx(p,{label:"이메일",placeholder:"이메일을 입력해주세요",isError:!!o,errorMessage:o??"",onChange:b}),r.jsx(p,{label:"비밀번호",placeholder:"비밀번호를 입력해주세요",message:"최소 8자 이상",isHiddenable:!0,isError:!!n,errorMessage:n??"",onChange:j}),r.jsx(w,{variant:c?"secondary":"primary",type:"submit",disabled:!i||o!==null||!l||n!==null,children:c?r.jsxs("span",{className:"flex items-center gap-1",children:["로그인 중 ",r.jsx(L,{})]}):"로그인"})]})};g.__docgenInfo={description:"",methods:[],displayName:"LoginForm",props:{onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(msg: string) => void",signature:{arguments:[{type:{name:"string"},name:"msg"}],return:{name:"void"}}},description:""}}};const B={title:"Auth/LoginForm",component:g,tags:["autodocs"]},a={};a.parameters={...a.parameters,docs:{...a.parameters?.docs,source:{originalSource:"{}",...a.parameters?.docs?.source}}};const M=["Default"];export{a as Default,M as __namedExportsOrder,B as default};
