import{j as s}from"./jsx-runtime-Czi9EJiJ.js";import{r as t}from"./iframe-D5qhrdFV.js";import{I as m}from"./Input--ZQFqzwH.js";import{D as v}from"./DropDown-BaqzAnwg.js";import{B as K}from"./Button-DmKtGRYb.js";import{a as R}from"./fetcher-BRjlZRIL.js";import{c as W}from"./cn-DWDuF9m2.js";import"./preload-helper-B4AOKawx.js";import"./TextField-w-8HQ9Kt.js";import"./auth.store-DSFcoNzr.js";import"./Modal-BwjqGdZg.js";import"./ProfileImageChangeInput-C11VMuTL.js";import"./image-DtcfOlC0.js";import"./use-merged-ref-Cp8N0evl.js";import"./TextBox-BalULYZP.js";import"./delete-DpU2ogCQ.js";const D=({onSuccess:P,onError:A})=>{const[w,_]=t.useState(""),[b,I]=t.useState(""),[o,M]=t.useState(""),[i,T]=t.useState(""),[n,$]=t.useState(""),[l,C]=t.useState(""),[p,d]=t.useState(""),[g,h]=t.useState(null),[f,x]=t.useState(null),[E,N]=t.useState(null),[y,c]=t.useState(null),O=r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r),U=r=>{const e=r.target.value;_(e),e&&!O(e)?h("올바른 이메일 형식이 아닙니다."):h(null)},k=r=>{const e=r.target.value;I(e),e.length>10?x("닉네임은 최대 10자 이하이어야 합니다."):x(null)},L=r=>{const e=r.target.value;M(e),e&&e.length<8?N("비밀번호는 최소 8자 이상이어야 합니다."):N(null)},F=r=>{const e=r.target.value;T(e),c(o&&e&&o!==e?"비밀번호가 일치하지 않습니다.":null)};t.useEffect(()=>{c(o&&i&&o!==i?"비밀번호가 일치하지 않습니다.":null)},[o,i]);const H=Array.from({length:126},(r,e)=>{const a=1900+e;return{label:`${a}년`,value:a}}),q=()=>n?Array.from({length:12},(r,e)=>{const a=e+1;return{label:`${a}월`,value:a}}):[],B=()=>{if(!n||!l)return[];const r=new Date(n,l,0).getDate();return Array.from({length:r},(e,a)=>{const j=a+1;return{label:`${j}일`,value:j}})},J=async r=>{r.preventDefault(),console.log("회원가입 요청 폼 제출");try{const e={email:w,nickname:b,birthDate:`${n}-${String(l).padStart(2,"0")}-${String(p).padStart(2,"0")}`,password:o};console.log(e);const a=await R("/api/users/",{method:"POST",body:JSON.stringify(e),noAuth:!0});console.log("회원가입 성공:",a),P?.()}catch(e){console.error("회원가입 실패:",e+`
`),e instanceof Error&&(e.message.includes("EMAIL_DUPLICATE")?h("이미 사용 중인 이메일입니다."):e.message.includes("NICKNAME_DUPLICATE")?x("이미 사용 중인 닉네임입니다."):A?.("회원가입에 실패했습니다. 잠시 후 다시 시도해주세요."))}},S=W("w-[100px]","md:w-[135px]","xl:w-[200px]");return s.jsxs("form",{onSubmit:J,className:"flex flex-col gap-6",children:[s.jsx(m,{label:"이메일",placeholder:"이메일을 입력해 주세요",isError:!!g,errorMessage:g??"",onChange:U}),s.jsx(m,{label:"닉네임",placeholder:"닉네임을 입력해 주세요",message:"최대 10자 가능",isError:!!f,errorMessage:f??"",onChange:k}),s.jsx(m,{label:"비밀번호",placeholder:"비밀번호를 입력해 주세요",message:"최소 8자 이상",isHiddenable:!0,isError:!!E,errorMessage:E??"",onChange:L}),s.jsx(m,{label:"비밀번호 확인",placeholder:"비밀번호를 한번 더 입력해 주세요",isHiddenable:!0,isError:!!y,errorMessage:y??"",onChange:F}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{className:"text-[16px] font-medium text-white",children:"생년월일"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(v,{options:H,value:n,onChange:r=>{$(r),C(""),d("")},placeholder:"연도",className:S}),s.jsx(v,{options:q(),value:l,onChange:r=>{C(r),d("")},placeholder:"월",className:S}),s.jsx(v,{options:B(),value:p,onChange:r=>d(r),placeholder:"일",className:S})]})]}),s.jsx(K,{variant:"primary",type:"submit",className:"mt-6",disabled:!w||g!==null||!b||f!==null||!o||E!==null||!i||y!==null||!n||!l||!p,children:"가입하기"})]})};D.__docgenInfo={description:"",methods:[],displayName:"SignUpForm",props:{onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(msg: string) => void",signature:{arguments:[{type:{name:"string"},name:"msg"}],return:{name:"void"}}},description:""}}};const ce={title:"AUTH/SignUpForm",component:D,parameters:{layout:"centered"},argTypes:{onSuccess:{action:"success"},onError:{action:"error"}}},u={};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:"{}",...u.parameters?.docs?.source}}};const me=["Large"];export{u as Large,me as __namedExportsOrder,ce as default};
