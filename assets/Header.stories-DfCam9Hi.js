import{j as e}from"./jsx-runtime-DA7sEVPU.js";import{u as v,a as D,r as d,b as C}from"./iframe-CCNWC-AP.js";import{r as V}from"./index-Cz0ZLTbX.js";import{L as p}from"./link-Bh0Q0Wui.js";import{c as j}from"./cn-DWDuF9m2.js";import{u as N,c as E}from"./auth.store-DRWg0MzM.js";import{u as I}from"./modal.store-Cf993VjJ.js";import"./preload-helper-B4AOKawx.js";import"./image-BojR8rrI.js";import"./Modal-B1kNzODc.js";import"./Button-R8mwsutV.js";import"./ProfileEditModal-B7AvALjh.js";import"./ProfileImageChangeInput-BhzED0mU.js";import"./Input-DugaaQYG.js";import"./TextField-NZ8mKHmz.js";import"./TextBox-CvrTBeZB.js";import"./DropDown-BU0lmYA2.js";import"./fetcher-B5n4aDva.js";import"./uploadImage-DY3jjQGe.js";import"./PostCreateModal-CnRGeqOu.js";const S=({setShowSearch:t,onOpenMenu:s})=>e.jsxs("div",{className:"relative flex w-full items-center justify-between md:hidden",children:[e.jsx("button",{"aria-label":"menu",type:"button",className:"z-10 cursor-pointer",onClick:s,children:e.jsx("img",{src:"/icons/menu.svg",alt:"menu",className:"h-[24px] w-[24px]"})}),e.jsx(p,{href:"/",className:"absolute left-1/2 -translate-x-1/2 text-white",children:e.jsx("img",{src:"/icons/logo.png",className:"h-10 w-10"})}),e.jsx("button",{"aria-label":"search-button",type:"button",className:"z-10 cursor-pointer",onClick:()=>t(!0),children:e.jsx("img",{src:"/icons/search.svg",alt:"search",className:"h-[24px] w-[24px]"})})]});S.__docgenInfo={description:"",methods:[],displayName:"HeaderMobile",props:{setShowSearch:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"value"}],return:{name:"void"}}},description:""},onOpenMenu:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const k=({className:t,placeholder:s="검색어를 입력하세요",autoFocus:n,showIcon:l=!0,name:o="keyword",onSubmitted:u})=>{const i=v(),r=D(),c=r.get("keyword")??"",[m,h]=d.useState("");d.useEffect(()=>{h("")},[r.get("category")]);const w=a=>{a.preventDefault();const f=m.trim();if(f===c)return;const x=new URLSearchParams(r.toString());f?x.set("keyword",f):x.delete("keyword"),i.push(`/?${x.toString()}`),u?.()};return e.jsxs("form",{onSubmit:w,className:j("flex h-12 w-[291px] items-center gap-3 rounded-lg bg-[#252530] px-4 py-3",t),role:"search",children:[l&&e.jsx("img",{src:"/icons/search.svg",alt:"search","aria-hidden":"true",className:"h-6 w-6 shrink-0"}),e.jsx("input",{name:o,type:"search",placeholder:s,"aria-label":"search-box",autoComplete:"off",autoFocus:n,className:"w-full bg-transparent text-white placeholder-gray-600 outline-none",value:m,onChange:a=>h(a.target.value)}),e.jsx("button",{type:"submit",className:"sr-only",children:"검색"})]})};k.__docgenInfo={description:"",methods:[],displayName:"SearchForm",props:{className:{required:!1,tsType:{name:"string"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"검색어를 입력하세요"',computed:!1}},autoFocus:{required:!1,tsType:{name:"boolean"},description:""},showIcon:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},name:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"keyword"',computed:!1}},onSubmitted:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const q=({setShowSearch:t})=>e.jsxs("div",{className:"flex w-full items-center md:hidden",children:[e.jsx(k,{className:"w-full"}),e.jsx("button",{"aria-label":"검색 닫기",type:"button",className:"cursor-pointer p-3",onClick:()=>t(!1),children:e.jsx("img",{src:"/icons/delete.svg",alt:"검색 닫기",className:"h-[16px] w-[16px]"})})]});q.__docgenInfo={description:"",methods:[],displayName:"HeaderMobileSearch",props:{setShowSearch:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"value"}],return:{name:"void"}}},description:""}}};const L=t=>{const{openModal:s,closeModal:n}=I();return{openPostCreateModal:()=>{s("createPost",{onClose:()=>n(),onCreate:()=>{n(),setTimeout(()=>{s("normal",{message:"게시물이 성공적으로 등록되었습니다.",buttonText:"확인",onClick:()=>n()})},100)},onError:o=>{n(),s("normal",{message:"게시물 등록 중 오류가 발생했습니다. "+o,buttonText:"확인",onClick:()=>n()})}})}}},M=()=>{const t=v(),s=N(o=>o.isLogined),{openPostCreateModal:n}=L();return{handleOpen:()=>{if(!s){t.push("/login");return}n()}}},T=({isLogined:t,navItems:s,onOpenChat:n})=>{const l=C(),{handleOpen:o}=M(),u=l.startsWith("/my");return e.jsxs("div",{className:"hidden w-full items-center justify-between md:flex",children:[e.jsx("div",{className:"text-white",children:e.jsx(p,{href:"/",children:e.jsx("img",{src:"/icons/logo.png",className:"h-15 w-15"})})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:"ms-7 me-7"}),t?e.jsxs("ul",{className:"flex text-sm font-normal text-white",children:[!u&&e.jsx("li",{className:"flex items-center justify-center px-3",children:e.jsxs("button",{type:"button",onClick:o,className:"flex cursor-pointer items-center justify-center",children:[e.jsx("img",{src:"/icons/sell.svg",alt:"판매하기",className:"h-4 w-4"}),e.jsx("p",{className:"ml-1",children:"판매하기"})]})}),s.map(({href:i,label:r,icon:c,hasDivider:m})=>e.jsx("li",{className:`flex items-center justify-center px-3 first:pr-3 last:pl-3 ${m?"relative before:absolute before:left-0 before:h-4 before:w-px before:bg-white after:absolute after:right-0 after:h-4 after:w-px after:bg-white":""}`,children:i==="/chat"?e.jsxs("button",{type:"button",onClick:()=>n(),className:"flex cursor-pointer items-center justify-center",children:[e.jsx("img",{src:c,alt:r,className:"h-4 w-4"}),e.jsx("p",{className:"ml-1",children:r})]}):e.jsxs(p,{href:i,className:"flex items-center justify-center",children:[e.jsx("img",{src:c,alt:r,className:"h-4 w-4"}),e.jsx("p",{className:"ml-1",children:r})]})},i))]}):e.jsxs("ul",{className:"flex gap-[60px] text-sm font-normal text-white",children:[e.jsx("li",{className:"ml-[30px]",children:e.jsx(p,{href:"/login",children:"로그인"})}),e.jsx("li",{children:e.jsx(p,{href:"/signup",children:"회원가입"})})]})]})]})};T.__docgenInfo={description:"",methods:[],displayName:"HeaderDesktop",props:{isLogined:{required:!0,tsType:{name:"boolean"},description:""},navItems:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  href: string;
  label: string;
  icon: string;
  hasDivider: boolean;
}`,signature:{properties:[{key:"href",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"hasDivider",value:{name:"boolean",required:!0}}]}}],raw:`{
  href: string;
  label: string;
  icon: string;
  hasDivider: boolean;
}[]`},description:""},onOpenChat:{required:!0,tsType:{name:"signature",type:"function",raw:`(info?: {
  postingId: number;
  otherId: number;
  chatId?: number;
}) => void`,signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  postingId: number;
  otherId: number;
  chatId?: number;
}`,signature:{properties:[{key:"postingId",value:{name:"number",required:!0}},{key:"otherId",value:{name:"number",required:!0}},{key:"chatId",value:{name:"number",required:!1}}]}},name:"info"}],return:{name:"void"}}},description:""}}};const H=E(t=>({isOpen:!1,isVisible:!1,chatInfo:null,mount:s=>{t({isOpen:!0,chatInfo:s??null}),requestAnimationFrame(()=>t({isVisible:!0}))},hide:()=>t({isVisible:!1}),unmount:()=>t({isOpen:!1,chatInfo:null}),setChatInfo:s=>t({chatInfo:s??null})}));function O({onClose:t,onOpenChat:s}){const n=v(),l=C(),{isLogined:o,logout:u}=N(),{openModal:i,closeModal:r}=I(),{handleOpen:c}=M(),[m,h]=d.useState(!1),w=l.startsWith("/my");d.useEffect(()=>{const g=requestAnimationFrame(()=>h(!0));return()=>cancelAnimationFrame(g)},[]);const a=()=>{h(!1)},f=g=>{g.propertyName==="opacity"&&(m||t())},x=()=>{s(),a()},P=async()=>{(await fetch("/api/auth/logout",{method:"POST",credentials:"include"})).ok?(a(),n.push("/login"),n.refresh(),u(),i("normal",{message:"로그아웃이 완료되었습니다.",onClick:()=>{r()}})):i("normal",{message:"로그아웃에 실패했습니다.",onClick:()=>{r()}})};return e.jsxs("div",{children:[e.jsx("div",{className:j("fixed inset-0 z-900 bg-black/40 transition-opacity md:hidden",m?"opacity-100":"opacity-0"),onTransitionEnd:f,onClick:a}),e.jsxs("aside",{role:"dialog","aria-modal":"true",className:j("fixed top-0 left-0 z-901 h-dvh w-[78%] max-w-[320px] transform bg-[#1C1C22] shadow-2xl transition-transform ease-out md:hidden",m?"translate-x-0":"-translate-x-full"),children:[e.jsxs("header",{className:"flex items-center justify-between border-b border-white/10 px-4 py-3",children:[e.jsx("h2",{className:"text-base font-semibold text-white",children:"메뉴"}),e.jsx("img",{src:"/icons/delete.svg",alt:"닫기",onClick:a,className:"cursor-pointe h-6 w-6"})]}),e.jsx("nav",{className:"p-2",children:e.jsx("ul",{className:"flex flex-col",children:o?e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx("button",{type:"button",onClick:x,className:"w-full px-4 py-3 text-left text-white hover:bg-white/10",children:"채팅하기"})}),!w&&e.jsx("li",{children:e.jsx("button",{type:"button",onClick:()=>{c(),a()},className:"w-full px-4 py-3 text-left text-white hover:bg-white/10",children:"판매하기"})}),e.jsx("li",{children:e.jsx(p,{href:"/my",className:"block px-4 py-3 text-white hover:bg-white/10",onClick:a,children:"마이페이지"})}),e.jsx("li",{children:e.jsx("button",{type:"button",onClick:()=>{i("confirm",{message:"정말 로그아웃하시겠습니까?",onConfirm:async()=>{await P()},onCancel:()=>{r()}})},className:"w-full px-4 py-3 text-left text-red-400 hover:bg-white/10",children:"로그아웃"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(p,{href:"/login",onClick:a,className:"block px-4 py-3 text-white hover:bg-white/10",children:"로그인"})}),e.jsx("li",{children:e.jsx(p,{href:"/signup",onClick:a,className:"block px-4 py-3 text-white hover:bg-white/10",children:"회원가입"})})]})})})]})]})}O.__docgenInfo={description:"",methods:[],displayName:"MobileSideMenu",props:{onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onOpenChat:{required:!0,tsType:{name:"signature",type:"function",raw:`(info?: {
  postingId: number;
  otherId: number;
  chatId?: number;
}) => void`,signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  postingId: number;
  otherId: number;
  chatId?: number;
}`,signature:{properties:[{key:"postingId",value:{name:"number",required:!0}},{key:"otherId",value:{name:"number",required:!0}},{key:"chatId",value:{name:"number",required:!1}}]}},name:"info"}],return:{name:"void"}}},description:""}}};const F=[{href:"/chat",label:"채팅하기",icon:"/icons/chats.svg",hasDivider:!1},{href:"/my",label:"마이페이지",icon:"/icons/user.svg",hasDivider:!1}],_=()=>{const[t,s]=d.useState(!1),n=N(c=>c.isLogined),l=H(c=>c.mount),[o,u]=d.useState(!1),[i,r]=d.useState(!1);return d.useEffect(()=>r(!0),[]),e.jsxs("header",{className:"fixed top-0 left-0 z-50 h-[70px] w-full bg-[#1C1C22] px-[20px] md:h-[80px] md:px-[30px] xl:h-[100px]",children:[e.jsxs("div",{className:"flex h-full w-full items-center justify-between lg:mx-auto lg:max-w-[1200px]",children:[t?e.jsx(q,{setShowSearch:s}):e.jsx(S,{setShowSearch:s,onOpenMenu:()=>u(!0)}),e.jsx(T,{isLogined:n,navItems:F,onOpenChat:l})]}),i&&o&&V.createPortal(e.jsx(O,{onClose:()=>u(!1),onOpenChat:l}),document.body)]})};_.__docgenInfo={description:"",methods:[],displayName:"Header"};const oe={title:"Widgets/Header",component:_,parameters:{layout:"fullscreen"}},b={globals:{viewport:{value:"mobile2",isRotated:!1}}},y={parameters:{viewport:{defaultViewport:"responsive"}}};b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:`{
  globals: {
    viewport: {
      value: "mobile2",
      isRotated: false
    }
  }
}`,...b.parameters?.docs?.source}}};y.parameters={...y.parameters,docs:{...y.parameters?.docs,source:{originalSource:`{
  parameters: {
    viewport: {
      defaultViewport: "responsive"
    }
  }
}`,...y.parameters?.docs?.source}}};const ie=["Mobile","Desktop"];export{y as Desktop,b as Mobile,ie as __namedExportsOrder,oe as default};
