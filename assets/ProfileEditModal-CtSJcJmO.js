import{j as e}from"./jsx-runtime-C4pBERHz.js";import{r}from"./iframe-DDDrHg8_.js";import{c as C}from"./cn-DWDuF9m2.js";import{P as S}from"./ProfileImageChangeInput-BQHJo0J-.js";import{I as q}from"./Input-gnAW68KB.js";import{T as E}from"./TextBox-CKXZuVps.js";import{D as I}from"./DropDown-ClXttGL4.js";import{B as k}from"./Button-ZwxEQuRC.js";import{L as P,a as B}from"./fetcher-C0pZbtvP.js";import{u as D}from"./uploadImage-DY3jjQGe.js";const F=({imageUrl:o,nickname:l,introduction:m,category:c,className:g,onClose:h,onSave:w,onError:d})=>{const[p,y]=r.useState(null),[s,v]=r.useState(l),[i,j]=r.useState(m??""),[n,N]=r.useState(c??""),[x,u]=r.useState(!1),b=["전자제품/가전제품","식료품","의류/패션","스포츠/레저","뷰티/화장품","게임","도서/음반/문구","티켓/쿠폰","리빙/가구/생활","반려동물/취미"].map(t=>({label:t,value:t})),f=s!==l||i!==(m??"")||n!==(c??""),T=async()=>{try{if(!f)return;u(!0);let t=o;p&&(t=await D(p));const a={};s.trim()&&(a.nickname=s),i.trim()&&(a.introduction=i),t&&(a.imageUrl=t),n.trim()&&(a.category=n),await B("/api/users/me",{method:"PATCH",body:JSON.stringify(a)}),w?.()}catch(t){t instanceof Error?(console.error("프로필 수정 실패:",t),d?.(t)):d?.(new Error(String(t)))}finally{u(!1)}};return e.jsxs("div",{className:C("bg-black-900 relative flex flex-col rounded-lg","w-[300px] gap-[15px] p-5","md:w-[520px] md:gap-5 md:p-10","xl:w-[620px] xl:gap-[30px] xl:p-10",g),children:[e.jsx("button",{type:"button",onClick:h,className:"absolute top-3 right-3",children:e.jsx("img",{src:"/icons/delete.svg",alt:"닫기","aria-label":"닫기",width:24,height:24,className:"cursor-pointer"})}),e.jsx("h2",{className:"mb-6 text-lg font-semibold text-white",children:"프로필 수정"}),e.jsxs("div",{className:"flex w-full flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"프로필 이미지"}),e.jsx(S,{imgUrl:o,onChange:y})]}),e.jsxs("div",{className:"flex flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"닉네임"}),e.jsx(q,{value:s,onChange:t=>v(t.target.value),className:"w-[260px] xl:w-[540px]"})]}),e.jsxs("div",{className:"flex w-full flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"자기소개"}),e.jsx(E,{value:i,placeholder:"자기소개를 입력하세요...",onChange:t=>j(t.target.value),className:"w-[260px] md:w-[440px] xl:w-[540px]"})]}),e.jsxs("div",{className:"flex w-full flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"카테고리"}),e.jsx(I,{value:n,onChange:t=>N(t),options:b,className:"w-[260px] md:w-[440px] xl:w-[540px]"})]}),e.jsx("div",{className:"mt-auto flex w-full",children:e.jsx(k,{className:"mt-3 md:w-[440px]",variant:"primary",disabled:x||!s||!f,onClick:T,children:x?e.jsxs("span",{className:"flex items-center gap-2",children:["저장 중 ",e.jsx(P,{})]}):"저장하기"})})]})};F.__docgenInfo={description:"",methods:[],displayName:"ProfileEditModal",props:{imageUrl:{required:!1,tsType:{name:"string"},description:""},nickname:{required:!0,tsType:{name:"string"},description:""},introduction:{required:!1,tsType:{name:"string"},description:""},category:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onSave:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: Error) => void",signature:{arguments:[{type:{name:"Error"},name:"e"}],return:{name:"void"}}},description:""}}};export{F as P};
