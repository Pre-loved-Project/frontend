import{j as e}from"./jsx-runtime-K-Dn0W6b.js";import{r as s}from"./iframe-D2r0lrqQ.js";import{c as T}from"./cn-DWDuF9m2.js";import{P as C}from"./ProfileImageChangeInput-CEQ7-KMy.js";import{I}from"./Input-BN5O9AcM.js";import{T as S}from"./TextBox-BAuVIUjN.js";import{D as k}from"./DropDown-Cj2fuf7r.js";import{B as q}from"./Button-BLihgfM8.js";import{a as E}from"./fetcher-CtHLRpuY.js";import{u as P}from"./uploadImage-DY3jjQGe.js";const B=({imageUrl:o,nickname:p,introduction:u,category:x,className:f,onClose:g,onSave:h,onError:l})=>{const[m,w]=s.useState(null),[r,y]=s.useState(p),[i,v]=s.useState(u??""),[n,N]=s.useState(x??""),[c,d]=s.useState(!1),j=["전자제품/가전제품","식료품","의류/패션","스포츠/레저","뷰티/화장품","게임","도서/음반/문구","티켓/쿠폰","리빙/가구/생활","반려동물/취미"].map(t=>({label:t,value:t})),b=async()=>{try{d(!0);let t=o;m&&(t=await P(m));const a={};r.trim()&&(a.nickname=r),i.trim()&&(a.introduction=i),t&&(a.imageUrl=t),n.trim()&&(a.category=n),await E("/api/users/me",{method:"PATCH",body:JSON.stringify(a)}),h?.()}catch(t){t instanceof Error?(console.error("프로필 수정 실패:",t),l?.(t)):l?.(new Error(String(t)))}finally{d(!1)}};return e.jsxs("div",{className:T("bg-black-900 relative flex flex-col rounded-lg","w-[300px] gap-[15px] p-5","md:w-[520px] md:gap-5 md:p-10","xl:w-[620px] xl:gap-[30px] xl:p-10",f),children:[e.jsx("button",{type:"button",onClick:g,className:"absolute top-3 right-3",children:e.jsx("img",{src:"/icons/delete.svg",alt:"닫기","aria-label":"닫기",width:24,height:24,className:"cursor-pointer"})}),e.jsx("h2",{className:"mb-6 text-lg font-semibold text-white",children:"프로필 수정"}),e.jsxs("div",{className:"flex w-full flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"프로필 이미지"}),e.jsx(C,{imgUrl:o,onChange:w})]}),e.jsxs("div",{className:"flex flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"닉네임"}),e.jsx(I,{value:r,onChange:t=>y(t.target.value),className:"w-[260px] xl:w-[540px]"})]}),e.jsxs("div",{className:"flex w-full flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"자기소개"}),e.jsx(S,{value:i,placeholder:"자기소개를 입력하세요...",onChange:t=>v(t.target.value),className:"w-[260px] md:w-[440px] xl:w-[540px]"})]}),e.jsxs("div",{className:"flex w-full flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"카테고리"}),e.jsx(k,{value:n,onChange:t=>N(t),options:j,className:"w-[260px] md:w-[440px] xl:w-[540px]"})]}),e.jsx("div",{className:"mt-auto flex w-full",children:e.jsx(q,{className:"mt-3 md:w-[440px]",variant:"primary",disabled:c,onClick:b,children:c?"저장 중...":"저장하기"})})]})};B.__docgenInfo={description:"",methods:[],displayName:"ProfileEditModal",props:{imageUrl:{required:!1,tsType:{name:"string"},description:""},nickname:{required:!0,tsType:{name:"string"},description:""},introduction:{required:!1,tsType:{name:"string"},description:""},category:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onSave:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: Error) => void",signature:{arguments:[{type:{name:"Error"},name:"e"}],return:{name:"void"}}},description:""}}};export{B as P};
