import{j as t}from"./jsx-runtime-DpcqaxiH.js";import{r as a}from"./iframe-DOEmD7QD.js";import{I as u}from"./Input-BR0RDubS.js";import{D as w}from"./DropDown-5EaqFUGk.js";import{B as R}from"./Button-DR56knSZ.js";import{a as D}from"./fetcher-BVWKl_4K.js";import{c as W}from"./cn-DWDuF9m2.js";import"./preload-helper-B4AOKawx.js";import"./TextField-BrYC4eOp.js";import"./auth.store-Do-2l1qR.js";import"./Modal-C0Lk9ZV1.js";import"./ProfileImageChangeInput-kiP3JsLS.js";import"./image-C8R2Q8od.js";import"./use-merged-ref-CkNzotqh.js";import"./TextBox-C-h-0ltz.js";import"./delete-DpU2ogCQ.js";const P=({onSuccess:_,onError:$})=>{const[b,k]=a.useState(""),[j,A]=a.useState(""),[o,M]=a.useState(""),[i,O]=a.useState(""),[n,T]=a.useState(""),[l,C]=a.useState(""),[p,g]=a.useState(""),[h,f]=a.useState(null),[x,y]=a.useState(null),[E,N]=a.useState(null),[S,c]=a.useState(null),U=r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r),F=r=>{const e=r.target.value;k(e),e&&!U(e)?f("올바른 이메일 형식이 아닙니다."):f(null)},I=r=>{const e=r.target.value;A(e),e.length>10?y("닉네임은 최대 10자 이하이어야 합니다."):y(null)},H=r=>{const e=r.target.value;M(e),e&&e.length<8?N("비밀번호는 최소 8자 이상이어야 합니다."):N(null)},q=r=>{const e=r.target.value;O(e),c(o&&e&&o!==e?"비밀번호가 일치하지 않습니다.":null)};a.useEffect(()=>{c(o&&i&&o!==i?"비밀번호가 일치하지 않습니다.":null)},[o,i]);const B=Array.from({length:126},(r,e)=>{const s=1900+e;return{label:`${s}년`,value:s}}),L=()=>n?Array.from({length:12},(r,e)=>{const s=e+1;return{label:`${s}월`,value:s}}):[],G=()=>{if(!n||!l)return[];const r=new Date(n,l,0).getDate();return Array.from({length:r},(e,s)=>{const m=s+1;return{label:`${m}일`,value:m}})},J=async r=>{r.preventDefault(),console.log("회원가입 요청 폼 제출");const e=await D("/health",{method:"GET",noAuth:!0});console.log(e);try{const s={email:b,nickname:j,birthDate:`${n}-${String(l).padStart(2,"0")}-${String(p).padStart(2,"0")}`,password:o};console.log(s);const m=await D("/auth/signup",{method:"POST",body:JSON.stringify(s),noAuth:!0});console.log("회원가입 성공:",m),_?.()}catch(s){console.error("회원가입 실패:",s+`
`),s instanceof Error&&(s.message.includes("isEmailUsed")?f("이미 사용 중인 이메일입니다."):s.message.includes("isNicknameUsed")?y("이미 사용 중인 닉네임입니다."):$?.("회원가입에 실패했습니다. 잠시 후 다시 시도해주세요."))}},v=W("w-[100px]","md:w-[135px]","xl:w-[200px]");return t.jsxs("form",{onSubmit:J,className:"flex flex-col gap-6",children:[t.jsx(u,{label:"이메일",placeholder:"이메일을 입력해 주세요",isError:!!h,errorMessage:h??"",onChange:F}),t.jsx(u,{label:"닉네임",placeholder:"닉네임을 입력해 주세요",message:"최대 10자 가능",isError:!!x,errorMessage:x??"",onChange:I}),t.jsx(u,{label:"비밀번호",placeholder:"비밀번호를 입력해 주세요",message:"최소 8자 이상",isHiddenable:!0,isError:!!E,errorMessage:E??"",onChange:H}),t.jsx(u,{label:"비밀번호 확인",placeholder:"비밀번호를 한번 더 입력해 주세요",isHiddenable:!0,isError:!!S,errorMessage:S??"",onChange:q}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("label",{className:"text-[16px] font-medium text-white",children:"생년월일"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx(w,{options:B,value:n,onChange:r=>{T(r),C(""),g("")},placeholder:"연도",className:v}),t.jsx(w,{options:L(),value:l,onChange:r=>{C(r),g("")},placeholder:"월",className:v}),t.jsx(w,{options:G(),value:p,onChange:r=>g(r),placeholder:"일",className:v})]})]}),t.jsx(R,{variant:"primary",type:"submit",className:"mt-6",disabled:!b||h!==null||!j||x!==null||!o||E!==null||!i||S!==null||!n||!l||!p,children:"가입하기"})]})};P.__docgenInfo={description:"",methods:[],displayName:"SignUpForm",props:{onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(msg: string) => void",signature:{arguments:[{type:{name:"string"},name:"msg"}],return:{name:"void"}}},description:""}}};const ce={title:"AUTH/SignUpForm",component:P,parameters:{layout:"centered"},argTypes:{onSuccess:{action:"success"},onError:{action:"error"}}},d={};d.parameters={...d.parameters,docs:{...d.parameters?.docs,source:{originalSource:"{}",...d.parameters?.docs?.source}}};const me=["Large"];export{d as Large,me as __namedExportsOrder,ce as default};
