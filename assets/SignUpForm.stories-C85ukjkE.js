import{j as a}from"./jsx-runtime-DNc-FZRy.js";import{r as t}from"./iframe-DjV5xpAh.js";import{I as d}from"./Input-9ka_0GZ2.js";import{D as j}from"./DropDown-DEGCMGSy.js";import{B as V}from"./Button-DK9wk4zH.js";import{a as M}from"./fetcher-COfFthOi.js";import"./preload-helper-B4AOKawx.js";import"./cn-DWDuF9m2.js";import"./TextField-CJ0ykas2.js";import"./image-BT9CiITI.js";import"./use-merged-ref-DLgWFi3a.js";const k=({size:o="lg",onSuccess:T,onError:_})=>{const[C,$]=t.useState(""),[N,A]=t.useState(""),[n,O]=t.useState(""),[c,U]=t.useState(""),[l,z]=t.useState(""),[i,P]=t.useState(""),[f,S]=t.useState(""),[v,x]=t.useState(null),[y,E]=t.useState(null),[w,D]=t.useState(null),[b,m]=t.useState(null),F=r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r),I=r=>{const e=r.target.value;$(e),e&&!F(e)?x("올바른 이메일 형식이 아닙니다."):x(null)},q=r=>{const e=r.target.value;A(e),e.length>10?E("닉네임은 최대 10자 이하이어야 합니다."):E(null)},H=r=>{const e=r.target.value;O(e),e&&e.length<8?D("비밀번호는 최소 8자 이상이어야 합니다."):D(null)},B=r=>{const e=r.target.value;U(e),m(n&&e&&n!==e?"비밀번호가 일치하지 않습니다.":null)};t.useEffect(()=>{m(n&&c&&n!==c?"비밀번호가 일치하지 않습니다.":null)},[n,c]);const L=Array.from({length:126},(r,e)=>{const s=1900+e;return{label:`${s}년`,value:s}}),G=()=>l?Array.from({length:12},(r,e)=>{const s=e+1;return{label:`${s}월`,value:s}}):[],J=()=>{if(!l||!i)return[];const r=new Date(l,i,0).getDate();return Array.from({length:r},(e,s)=>{const u=s+1;return{label:`${u}일`,value:u}})},R=async r=>{r.preventDefault(),console.log("회원가입 요청 폼 제출");const e=await M("/health",{method:"GET",noAuth:!0});console.log(e);try{const s={email:C,nickname:N,birthDate:`${l}-${String(i).padStart(2,"0")}-${String(f).padStart(2,"0")}`,password:n};console.log(s);const u=await M("/auth/signup",{method:"POST",body:JSON.stringify(s),noAuth:!0});console.log("회원가입 성공:",u),T?.()}catch(s){console.error("회원가입 실패:",s+`
`),s instanceof Error&&(s.message.includes("isEmailUsed")?x("이미 사용 중인 이메일입니다."):s.message.includes("isNicknameUsed")?E("이미 사용 중인 닉네임입니다."):_?.("회원가입에 실패했습니다. 잠시 후 다시 시도해주세요."))}};return a.jsxs("form",{onSubmit:R,className:"flex flex-col gap-6",children:[a.jsx(d,{size:o,label:"이메일",placeholder:"이메일을 입력해 주세요",isError:!!v,errorMessage:v??"",onChange:I}),a.jsx(d,{size:o,label:"닉네임",placeholder:"닉네임을 입력해 주세요",message:"최대 10자 가능",isError:!!y,errorMessage:y??"",onChange:q}),a.jsx(d,{size:o,label:"비밀번호",placeholder:"비밀번호를 입력해 주세요",message:"최소 8자 이상",isHiddenable:!0,isError:!!w,errorMessage:w??"",onChange:H}),a.jsx(d,{size:o,label:"비밀번호 확인",placeholder:"비밀번호를 한번 더 입력해 주세요",isHiddenable:!0,isError:!!b,errorMessage:b??"",onChange:B}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("label",{className:"font-medium text-black-900 text-[16px]",children:"생년월일"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx(j,{size:o,widthSize:"short",options:L,value:l,onChange:r=>{z(r),P(""),S("")},placeholder:"연도"}),a.jsx(j,{size:o,widthSize:"short",options:G(),value:i,onChange:r=>{P(r),S("")},placeholder:"월"}),a.jsx(j,{size:o,widthSize:"short",options:J(),value:f,onChange:r=>S(r),placeholder:"일"})]})]}),a.jsx(V,{variant:"primary",size:o,type:"submit",className:"mt-6",disabled:!C||v!==null||!N||y!==null||!n||w!==null||!c||b!==null||!l||!i||!f,children:"가입하기"})]})};k.__docgenInfo={description:"",methods:[],displayName:"SignUpForm",props:{size:{required:!1,tsType:{name:"union",raw:'"sm" | "md" | "lg"',elements:[{name:"literal",value:'"sm"'},{name:"literal",value:'"md"'},{name:"literal",value:'"lg"'}]},description:"",defaultValue:{value:'"lg"',computed:!1}},onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(msg: string) => void",signature:{arguments:[{type:{name:"string"},name:"msg"}],return:{name:"void"}}},description:""}}};const oe={title:"AUTH/SignUpForm",component:k,parameters:{layout:"centered"},argTypes:{size:{control:{type:"radio"},options:["sm","md","lg"]},onSuccess:{action:"success"},onError:{action:"error"}}},p={args:{size:"lg"}},g={args:{size:"md"}},h={args:{size:"sm"}};p.parameters={...p.parameters,docs:{...p.parameters?.docs,source:{originalSource:`{
  args: {
    size: "lg"
  }
}`,...p.parameters?.docs?.source}}};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:`{
  args: {
    size: "md"
  }
}`,...g.parameters?.docs?.source}}};h.parameters={...h.parameters,docs:{...h.parameters?.docs,source:{originalSource:`{
  args: {
    size: "sm"
  }
}`,...h.parameters?.docs?.source}}};const ne=["Large","Medium","Small"];export{p as Large,g as Medium,h as Small,ne as __namedExportsOrder,oe as default};
