import{j as t}from"./jsx-runtime-BswGAHwJ.js";import{r as s}from"./iframe-Bjgk5DWC.js";import{c as I}from"./cn-DWDuF9m2.js";import{P as q}from"./ProfileImageChangeInput-CNyOrJzz.js";import{I as E}from"./Input-BzZb3a2E.js";import{T as k}from"./TextBox-BOs7zwsB.js";import{D as P}from"./DropDown-DsnKr6n9.js";import{B}from"./Button-DXNA-56d.js";import{L as D,a as F}from"./fetcher-CZp6-9RZ.js";import{u as L}from"./uploadImage-DY3jjQGe.js";const U=({imageUrl:o,nickname:l,introduction:m,category:c,className:h,onClose:w,onSave:y,onError:d})=>{const[p,v]=s.useState(null),[u,j]=s.useState(!1),[a,N]=s.useState(l),[i,b]=s.useState(m??""),[n,C]=s.useState(c??""),[x,f]=s.useState(!1),T=["전자제품/가전제품","식료품","의류/패션","스포츠/레저","뷰티/화장품","게임","도서/음반/문구","티켓/쿠폰","리빙/가구/생활","반려동물/취미"].map(e=>({label:e,value:e})),g=u||a!==l||i!==(m??"")||n!==(c??""),S=async()=>{try{if(!g)return;f(!0);let e=o;p?e=await L(p):u&&(e=null);const r={};a.trim()&&(r.nickname=a),i.trim()&&(r.introduction=i),e!==void 0&&(r.imageUrl=e),n.trim()&&(r.category=n),await F("/api/users/me",{method:"PATCH",body:JSON.stringify(r)}),y?.()}catch(e){e instanceof Error?(console.error("프로필 수정 실패:",e),d?.(e)):d?.(new Error(String(e)))}finally{f(!1)}};return t.jsxs("div",{className:I("bg-black-900 relative flex flex-col rounded-lg","w-[300px] gap-[15px] p-5","md:w-[520px] md:gap-5 md:p-10","xl:w-[620px] xl:gap-[30px] xl:p-10",h),children:[t.jsx("button",{type:"button",onClick:w,className:"absolute top-3 right-3",children:t.jsx("img",{src:"/icons/delete.svg",alt:"닫기","aria-label":"닫기",width:24,height:24,className:"cursor-pointer"})}),t.jsx("h2",{className:"mb-6 text-lg font-semibold text-white",children:"프로필 수정"}),t.jsxs("div",{className:"flex w-full flex-col items-start gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-white",children:"프로필 이미지"}),t.jsx(q,{imgUrl:o,onChange:e=>{v(e),j(!0)}})]}),t.jsxs("div",{className:"flex flex-col items-start gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-white",children:"닉네임"}),t.jsx(E,{value:a,onChange:e=>N(e.target.value),className:"w-[260px] xl:w-[540px]"})]}),t.jsxs("div",{className:"flex w-full flex-col items-start gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-white",children:"자기소개"}),t.jsx(k,{value:i,placeholder:"자기소개를 입력하세요...",onChange:e=>b(e.target.value),className:"w-[260px] md:w-[440px] xl:w-[540px]"})]}),t.jsxs("div",{className:"flex w-full flex-col items-start gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-white",children:"카테고리"}),t.jsx(P,{value:n,onChange:e=>C(e),options:T,className:"w-[260px] md:w-[440px] xl:w-[540px]"})]}),t.jsx("div",{className:"mt-auto flex w-full",children:t.jsx(B,{className:"mt-3 md:w-[440px]",variant:"primary",disabled:x||!a||!g,onClick:S,children:x?t.jsxs("span",{className:"flex items-center gap-2",children:["저장 중 ",t.jsx(D,{})]}):"저장하기"})})]})};U.__docgenInfo={description:"",methods:[],displayName:"ProfileEditModal",props:{imageUrl:{required:!1,tsType:{name:"string"},description:""},nickname:{required:!0,tsType:{name:"string"},description:""},introduction:{required:!1,tsType:{name:"string"},description:""},category:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onSave:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: Error) => void",signature:{arguments:[{type:{name:"Error"},name:"e"}],return:{name:"void"}}},description:""}}};export{U as P};
