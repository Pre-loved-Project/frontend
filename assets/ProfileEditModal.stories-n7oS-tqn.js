import{j as e}from"./jsx-runtime-lKGZSrqI.js";import{r as s}from"./iframe-TChHqzZW.js";import{c as I}from"./cn-DWDuF9m2.js";import{P as D}from"./ProfileImageChangeInput-DKr17KY_.js";import{I as P}from"./Input-BYMdlezz.js";import{T as E}from"./TextBox-C93SquLq.js";import{D as F}from"./DropDown-CtnvnffI.js";import{B as U}from"./Button-C50UyEO0.js";import{a as q}from"./fetcher-BiQhbSL6.js";import{u as L}from"./uploadImage-Bx7ngp9C.js";import"./preload-helper-B4AOKawx.js";import"./image-BI7YQTOf.js";import"./use-merged-ref-C_sCuZkK.js";import"./image-select-ojOJEipE.js";import"./TextField-C6CJdOak.js";import"./auth.store-CiFWlscG.js";const f="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.9993%2013.2287L6.08064%2019.1473C5.91911%2019.3088%205.71607%2019.3915%205.47152%2019.3952C5.22698%2019.399%205.02021%2019.3163%204.8512%2019.1473C4.68217%2018.9783%204.59766%2018.7734%204.59766%2018.5326C4.59766%2018.2918%204.68217%2018.0869%204.8512%2017.9179L10.7698%2011.9993L4.8512%206.08063C4.68966%205.91911%204.60702%205.71607%204.60329%205.47152C4.59953%205.22699%204.68217%205.02021%204.8512%204.8512C5.02021%204.68217%205.22512%204.59766%205.46592%204.59766C5.70672%204.59766%205.91162%204.68217%206.08064%204.8512L11.9993%2010.7698L17.9179%204.8512C18.0794%204.68966%2018.2824%204.60702%2018.527%204.60329C18.7715%204.59953%2018.9783%204.68217%2019.1473%204.8512C19.3163%205.02021%2019.4008%205.22512%2019.4008%205.46592C19.4008%205.70672%2019.3163%205.91162%2019.1473%206.08063L13.2287%2011.9993L19.1473%2017.9179C19.3088%2018.0794%2019.3915%2018.2824%2019.3952%2018.527C19.399%2018.7715%2019.3163%2018.9783%2019.1473%2019.1473C18.9783%2019.3163%2018.7734%2019.4008%2018.5326%2019.4008C18.2918%2019.4008%2018.0869%2019.3163%2017.9179%2019.1473L11.9993%2013.2287Z'%20fill='%23F1F1F5'/%3e%3c/svg%3e",Q={src:f,height:24,width:24,blurDataURL:f},d=({imageUrl:n,nickname:r,introduction:i,category:h,className:w,onClose:y,onSave:v,onError:p})=>{const[u,C]=s.useState(null),[l,j]=s.useState(r),[m,b]=s.useState(i??""),[c,k]=s.useState(h??""),[g,x]=s.useState(!1),N=["전자제품/가전제품","식료품","의류/패션","스포츠/레저","뷰티/화장품","게임","도서/음반/문구","티켓/쿠폰","리빙/가구/생활","반려동물/취미"].map(t=>({label:t,value:t})),S=async()=>{try{x(!0);let t=n;u&&(t=await L(u));const a={};l.trim()&&(a.nickname=l),m.trim()&&(a.introduction=m),t&&(a.imageUrl=t),c.trim()&&(a.category=c),await q("/api/users/me",{method:"PATCH",body:JSON.stringify(a)}),v?.()}catch(t){t instanceof Error?(console.error("프로필 수정 실패:",t),p?.(t)):p?.(new Error(String(t)))}finally{x(!1)}};return e.jsxs("div",{className:I("bg-black-900 relative flex flex-col rounded-lg","w-[300px] gap-[15px] p-5","md:w-[520px] md:gap-[20px] md:p-10","xl:w-[620px] xl:gap-[30px] xl:p-10",w),children:[e.jsx("button",{type:"button",onClick:y,className:"absolute top-3 right-3",children:e.jsx(Q,{width:24,height:24,"aria-label":"닫기",className:"cursor-pointer",role:"img"})}),e.jsx("h2",{className:"mb-6 text-lg font-semibold text-white",children:"프로필 수정"}),e.jsxs("div",{className:"flex w-full flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"프로필 이미지"}),e.jsx(D,{imgUrl:n,onChange:C})]}),e.jsxs("div",{className:"flex flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"닉네임"}),e.jsx(P,{value:l,onChange:t=>j(t.target.value),className:"w-[260px] xl:w-[540px]"})]}),e.jsxs("div",{className:"flex w-full flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"자기소개"}),e.jsx(E,{value:m,placeholder:"자기소개를 입력하세요...",onChange:t=>b(t.target.value),className:"w-[260px] md:w-[440px] xl:w-[540px]"})]}),e.jsxs("div",{className:"flex w-full flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"카테고리"}),e.jsx(F,{value:c,onChange:t=>k(t),options:N,className:"w-[260px] md:w-[440px] xl:w-[540px]"})]}),e.jsx("div",{className:"mt-auto flex w-full",children:e.jsx(U,{className:"mt-3 md:w-[440px]",variant:"primary",disabled:g,onClick:S,children:g?"저장 중...":"저장하기"})})]})};d.__docgenInfo={description:"",methods:[],displayName:"ProfileEditModal",props:{imageUrl:{required:!1,tsType:{name:"string"},description:""},nickname:{required:!0,tsType:{name:"string"},description:""},introduction:{required:!1,tsType:{name:"string"},description:""},category:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onSave:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: Error) => void",signature:{arguments:[{type:{name:"Error"},name:"e"}],return:{name:"void"}}},description:""}}};const X={title:"User/ProfileEditModal",component:d,tags:["autodocs"],parameters:{docs:{story:{inline:!1,iframeHeight:900}}},argTypes:{onClose:{action:"closed"},onSave:{action:"saved"}}},o={render:n=>{const[r,i]=s.useState(!0);return e.jsxs(e.Fragment,{children:[r&&e.jsx(d,{...n,imageUrl:"https://i.namu.wiki/i/bWtUr_r8eY7ikAhSgpZY0kga1QCDgZIsQI9P3UDmIDKqBJ67zQGZg95H2Svkph_k6PkQ2w_HRXj55lF9BSZD07VqH2PUdFLKWDm880fd0dIgk9nsC3vamlu0iPsjnPe4EOt6cGF7u0wWKfyYWjsaRHQRjBwFu5wmUD1RZtcxQyE.webp",nickname:"홍길동",introduction:"안녕하세요. 저는 테스트 사용자입니다.",category:"전자제품/가전제품",onClose:()=>{console.log("모달 닫기"),i(!1)},onSave:()=>{console.log("저장 클릭")}}),!r&&e.jsx("button",{onClick:()=>i(!0),className:"mt-5 rounded bg-blue-500 px-4 py-2 text-white",children:"모달 열기"})]})}};o.parameters={...o.parameters,docs:{...o.parameters?.docs,source:{originalSource:`{
  render: args => {
    const [open, setOpen] = useState(true);
    return <>
        {open && <ProfileEditModal {...args} imageUrl="https://i.namu.wiki/i/bWtUr_r8eY7ikAhSgpZY0kga1QCDgZIsQI9P3UDmIDKqBJ67zQGZg95H2Svkph_k6PkQ2w_HRXj55lF9BSZD07VqH2PUdFLKWDm880fd0dIgk9nsC3vamlu0iPsjnPe4EOt6cGF7u0wWKfyYWjsaRHQRjBwFu5wmUD1RZtcxQyE.webp" nickname="홍길동" introduction="안녕하세요. 저는 테스트 사용자입니다." category="전자제품/가전제품" onClose={() => {
        console.log("모달 닫기");
        setOpen(false);
      }} onSave={() => {
        console.log("저장 클릭");
      }} />}
        {!open && <button onClick={() => setOpen(true)} className="mt-5 rounded bg-blue-500 px-4 py-2 text-white">
            모달 열기
          </button>}
      </>;
  }
}`,...o.parameters?.docs?.source}}};const $=["Main"];export{o as Main,$ as __namedExportsOrder,X as default};
