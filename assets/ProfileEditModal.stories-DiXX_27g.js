import{j as e}from"./jsx-runtime-BxeKcGYQ.js";import{r as s}from"./iframe-DIdCkNzQ.js";import{n as C}from"./image-CU8AScGB.js";import{c as I}from"./cn-DWDuF9m2.js";import{P}from"./ProfileImageChangeInput-Bf6DsQtW.js";import{I as D}from"./Input--NQVyEyy.js";import{T as E}from"./TextBox-DCiXM5iq.js";import{D as U}from"./DropDown-DZJlsn-X.js";import{B as q}from"./Button-CJO3oZQO.js";import{a as F}from"./fetcher-BSr_V1Jr.js";import{u as Q}from"./uploadImage-Bx7ngp9C.js";import"./preload-helper-B4AOKawx.js";import"./use-merged-ref-CtFm3MDb.js";import"./image-select-D522DtYO.js";import"./TextField-D65yp0Vs.js";import"./auth.store-DKzSwO8o.js";const d=({imageUrl:n,nickname:r,introduction:o,category:f,className:h,onClose:w,onSave:y,onError:p})=>{const[u,j]=s.useState(null),[l,v]=s.useState(r),[m,k]=s.useState(o??""),[c,b]=s.useState(f??""),[g,x]=s.useState(!1),N=["전자제품/가전제품","식료품","의류/패션","스포츠/레저","뷰티/화장품","게임","도서/음반/문구","티켓/쿠폰","리빙/가구/생활","반려동물/취미"].map(t=>({label:t,value:t})),S=async()=>{try{x(!0);let t=n;u&&(t=await Q(u));const a={};l.trim()&&(a.nickname=l),m.trim()&&(a.introduction=m),t&&(a.imageUrl=t),c.trim()&&(a.category=c),await F("/api/users/me",{method:"PATCH",body:JSON.stringify(a)}),y?.()}catch(t){t instanceof Error?(console.error("프로필 수정 실패:",t),p?.(t)):p?.(new Error(String(t)))}finally{x(!1)}};return e.jsxs("div",{className:I("bg-black-900 relative flex flex-col rounded-lg","w-[300px] gap-[15px] p-5","md:w-[520px] md:gap-[20px] md:p-10","xl:w-[620px] xl:gap-[30px] xl:p-10",h),children:[e.jsx("button",{type:"button",onClick:w,className:"absolute top-3 right-3",children:e.jsx(C,{src:"icons/delete.svg",alt:"닫기",width:24,height:24})}),e.jsx("h2",{className:"mb-6 text-lg font-semibold text-white",children:"프로필 수정"}),e.jsxs("div",{className:"flex w-full flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"프로필 이미지"}),e.jsx(P,{imgUrl:n,onChange:j})]}),e.jsxs("div",{className:"flex flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"닉네임"}),e.jsx(D,{value:l,onChange:t=>v(t.target.value),className:"w-[260px] xl:w-[540px]"})]}),e.jsxs("div",{className:"flex w-full flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"자기소개"}),e.jsx(E,{value:m,placeholder:"자기소개를 입력하세요...",onChange:t=>k(t.target.value),className:"w-[260px] md:w-[440px] xl:w-[540px]"})]}),e.jsxs("div",{className:"flex w-full flex-col items-start gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"카테고리"}),e.jsx(U,{value:c,onChange:t=>b(t),options:N,className:"w-[260px] md:w-[440px] xl:w-[540px]"})]}),e.jsx("div",{className:"mt-auto flex w-full",children:e.jsx(q,{className:"mt-3 md:w-[440px]",variant:"primary",disabled:g,onClick:S,children:g?"저장 중...":"저장하기"})})]})};d.__docgenInfo={description:"",methods:[],displayName:"ProfileEditModal",props:{imageUrl:{required:!1,tsType:{name:"string"},description:""},nickname:{required:!0,tsType:{name:"string"},description:""},introduction:{required:!1,tsType:{name:"string"},description:""},category:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onSave:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: Error) => void",signature:{arguments:[{type:{name:"Error"},name:"e"}],return:{name:"void"}}},description:""}}};const V={title:"User/ProfileEditModal",component:d,tags:["autodocs"],parameters:{docs:{story:{inline:!1,iframeHeight:900}}},argTypes:{onClose:{action:"closed"},onSave:{action:"saved"}}},i={render:n=>{const[r,o]=s.useState(!0);return e.jsxs(e.Fragment,{children:[r&&e.jsx(d,{...n,imageUrl:"https://i.namu.wiki/i/bWtUr_r8eY7ikAhSgpZY0kga1QCDgZIsQI9P3UDmIDKqBJ67zQGZg95H2Svkph_k6PkQ2w_HRXj55lF9BSZD07VqH2PUdFLKWDm880fd0dIgk9nsC3vamlu0iPsjnPe4EOt6cGF7u0wWKfyYWjsaRHQRjBwFu5wmUD1RZtcxQyE.webp",nickname:"홍길동",introduction:"안녕하세요. 저는 테스트 사용자입니다.",category:"전자제품/가전제품",onClose:()=>{console.log("모달 닫기"),o(!1)},onSave:()=>{console.log("저장 클릭")}}),!r&&e.jsx("button",{onClick:()=>o(!0),className:"mt-5 rounded bg-blue-500 px-4 py-2 text-white",children:"모달 열기"})]})}};i.parameters={...i.parameters,docs:{...i.parameters?.docs,source:{originalSource:`{
  render: args => {
    const [open, setOpen] = useState(true);
    return <>
        {open && <ProfileEditModal {...args} imageUrl="https://i.namu.wiki/i/bWtUr_r8eY7ikAhSgpZY0kga1QCDgZIsQI9P3UDmIDKqBJ67zQGZg95H2Svkph_k6PkQ2w_HRXj55lF9BSZD07VqH2PUdFLKWDm880fd0dIgk9nsC3vamlu0iPsjnPe4EOt6cGF7u0wWKfyYWjsaRHQRjBwFu5wmUD1RZtcxQyE.webp" nickname="홍길동" introduction="안녕하세요. 저는 테스트 사용자입니다." category="전자제품/가전제품" onClose={() => {
        console.log("모달 닫기");
        setOpen(false);
      }} onSave={() => {
        console.log("저장 클릭");
      }} />}
        {!open && <button onClick={() => setOpen(true)} className="mt-5 rounded bg-blue-500 px-4 py-2 text-white">
            모달 열기
          </button>}
      </>;
  }
}`,...i.parameters?.docs?.source}}};const X=["Main"];export{i as Main,X as __namedExportsOrder,V as default};
