import{j as t}from"./jsx-runtime-BfjiPOCJ.js";import{r as s}from"./iframe-CZvypwl7.js";import{I as c}from"./Input-BU1XvXjZ.js";import{B as w}from"./Button-Cr0QnKUL.js";import{u as b}from"./auth.store-Jo1qD9ak.js";import{a as j}from"./fetcher-DTgrssYR.js";import"./preload-helper-B4AOKawx.js";import"./cn-DWDuF9m2.js";import"./TextField-C7Ag9iUJ.js";import"./Modal-C46JcsKZ.js";import"./ProfileImageChangeInput-DyshXe7H.js";import"./image-3FmloGxy.js";import"./TextBox-DX5Oy-iP.js";import"./DropDown-BKCfU1SW.js";const p=({size:T="lg",onSuccess:d,onError:g,...A})=>{const[l,f]=s.useState(""),[i,h]=s.useState(""),[o,m]=s.useState(null),[n,u]=s.useState(null),{setAccessToken:v}=b(),E=async r=>{r.preventDefault(),console.log("로그인 요청 폼 제출");try{const e=await j("/auth/login",{method:"POST",body:JSON.stringify({email:l,password:i}),noAuth:!0});v(e.accessToken),d?.()}catch{g?.(`로그인에 실패하였습니다.
이메일과 비밀번호를 확인해주세요.`)}},x=r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r),y=r=>{const e=r.target.value;f(e),e!=null&&e!==""&&!x(e)?m("올바른 이메일 형식이 아닙니다."):m(null)},S=r=>{const e=r.target.value;h(e),e!=null&&e!==""&&e.length<8?u("비밀번호는 최소 8자 이상이어야 합니다."):u(null)};return t.jsxs("form",{onSubmit:E,className:"flex flex-col gap-6",children:[t.jsx(c,{label:"이메일",placeholder:"이메일을 입력해주세요",isError:!!o,errorMessage:o??"",onChange:y}),t.jsx(c,{label:"비밀번호",placeholder:"비밀번호를 입력해주세요",message:"최소 8자 이상",isHiddenable:!0,isError:!!n,errorMessage:n??"",onChange:S}),t.jsx(w,{variant:"primary",type:"submit",disabled:!l||o!==null||!i||n!==null,children:"로그인"})]})};p.__docgenInfo={description:"",methods:[],displayName:"LoginForm",props:{size:{required:!1,tsType:{name:"union",raw:'"sm" | "md" | "lg"',elements:[{name:"literal",value:'"sm"'},{name:"literal",value:'"md"'},{name:"literal",value:'"lg"'}]},description:"",defaultValue:{value:'"lg"',computed:!1}},onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(msg: string) => void",signature:{arguments:[{type:{name:"string"},name:"msg"}],return:{name:"void"}}},description:""}}};const H={title:"Auth/LoginForm",component:p,tags:["autodocs"]},a={};a.parameters={...a.parameters,docs:{...a.parameters?.docs,source:{originalSource:"{}",...a.parameters?.docs?.source}}};const J=["Default"];export{a as Default,J as __namedExportsOrder,H as default};
